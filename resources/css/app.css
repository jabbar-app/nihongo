@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .font-japanese {
    font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', 'Yu Gothic', 'Meiryo', sans-serif;
  }

  /* Smooth page transitions */
  .page-transition {
    @apply transition-opacity duration-300 ease-in-out;
  }

  /* Progress bar animations */
  .progress-bar {
    @apply transition-all duration-700 ease-out;
    animation: progressGrow 0.7s ease-out;
  }

  @keyframes progressGrow {
    from {
      transform: scaleX(0);
      transform-origin: left;
    }
    to {
      transform: scaleX(1);
    }
  }

  /* Loading spinner */
  .spinner {
    @apply inline-block w-8 h-8 border-4 border-gray-200 border-t-blue-600 rounded-full;
    animation: spin 1s linear infinite;
  }

  .spinner-sm {
    @apply inline-block w-4 h-4 border-2 border-gray-200 border-t-blue-600 rounded-full;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* Pulse animation for loading states */
  .pulse-slow {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Hover effects for interactive elements */
  .hover-lift {
    @apply transition-all duration-200 ease-in-out;
  }

  .hover-lift:hover {
    @apply transform -translate-y-1 shadow-lg;
  }

  .hover-scale {
    @apply transition-transform duration-200 ease-in-out;
  }

  .hover-scale:hover {
    @apply transform scale-105;
  }

  /* Card hover effects */
  .card-hover {
    @apply transition-all duration-300 ease-in-out;
  }

  .card-hover:hover {
    @apply shadow-xl transform -translate-y-1;
  }

  /* Button press effect */
  .btn-press:active {
    @apply transform scale-95;
  }

  /* Fade in animation */
  .fade-in {
    animation: fadeIn 0.5s ease-in;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Slide in from bottom */
  .slide-in-bottom {
    animation: slideInBottom 0.4s ease-out;
  }

  @keyframes slideInBottom {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Slide in from top */
  .slide-in-top {
    animation: slideInTop 0.4s ease-out;
  }

  @keyframes slideInTop {
    from {
      transform: translateY(-20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Bounce animation for achievements */
  .bounce-in {
    animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes bounceIn {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Shake animation for errors */
  .shake {
    animation: shake 0.5s;
  }

  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translateX(-5px);
    }
    20%, 40%, 60%, 80% {
      transform: translateX(5px);
    }
  }

  /* Glow effect for special elements */
  .glow {
    animation: glow 2s ease-in-out infinite;
  }

  @keyframes glow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
    }
  }

  /* Celebration animation */
  .celebrate {
    animation: celebrate 0.8s ease-in-out;
  }

  @keyframes celebrate {
    0%, 100% {
      transform: scale(1) rotate(0deg);
    }
    25% {
      transform: scale(1.1) rotate(-5deg);
    }
    75% {
      transform: scale(1.1) rotate(5deg);
    }
  }
}

@layer utilities {
  /* Hide scrollbar for Chrome, Safari and Opera */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Hide scrollbar for IE, Edge and Firefox */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }

  /* Improve touch interactions on mobile */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
}

/* Alpine.js x-cloak directive */
[x-cloak] {
  display: none !important;
}

/* Enhanced Focus Indicators for Keyboard Navigation */
@layer base {
  /* Default focus styles for all interactive elements */
  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [tabindex]:focus-visible {
    outline: 2px solid theme('colors.indigo.500');
    outline-offset: 2px;
    border-radius: 0.25rem;
  }

  /* Remove default outline and use custom ring */
  *:focus {
    outline: none;
  }

  /* Enhanced focus for buttons */
  button:focus-visible {
    @apply ring-2 ring-indigo-500 ring-offset-2;
  }

  /* Enhanced focus for links */
  a:focus-visible {
    @apply ring-2 ring-indigo-500 ring-offset-2;
  }

  /* Enhanced focus for form inputs */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    @apply ring-2 ring-indigo-500 border-indigo-500;
  }

  /* Skip to main content link (for screen readers) */
  .skip-to-main {
    position: absolute;
    left: -9999px;
    z-index: 999;
    padding: 1rem;
    background-color: theme('colors.indigo.600');
    color: white;
    text-decoration: none;
  }

  .skip-to-main:focus {
    left: 50%;
    transform: translateX(-50%);
    top: 1rem;
  }

  /* Screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Screen reader only content that becomes visible on focus */
  .sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}

/* Keyboard shortcut badge styles */
@layer components {
  .kbd {
    @apply inline-block px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-300 rounded shadow-sm;
  }
}
